{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Downloads\\\\maersk-pdf-highlighter\\\\src\\\\PdfViewer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport \"react-pdf/dist/Page/TextLayer.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\npdfjs.GlobalWorkerOptions.workerSrc = `${process.env.PUBLIC_URL}/pdf.worker.min.mjs`;\nconst TARGET_TEXT = \"Gain on sale of non-current assets, etc.\";\nexport default function PdfViewer({\n  fileUrl,\n  pageNumber,\n  onDocumentLoadSuccess\n}) {\n  _s();\n  const [highlightRects, setHighlightRects] = useState([]);\n  const onPageRenderSuccess = page => {\n    page.getTextContent().then(textContent => {\n      const viewport = page.getViewport({\n        scale: 1.5\n      });\n      let boxes = [];\n      textContent.items.forEach(item => {\n        const str = item.str.trim();\n        if (str.includes(TARGET_TEXT)) {\n          const tx = pdfjs.Util.transform;\n          const transform = tx(viewport.transform, item.transform);\n          const x = transform[4];\n          const y = transform[5] - item.height;\n          const width = item.width * viewport.scale;\n          const height = item.height * viewport.scale;\n          boxes.push({\n            x,\n            y,\n            width,\n            height\n          });\n        }\n      });\n      setHighlightRects(boxes);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Document, {\n      file: fileUrl,\n      onLoadSuccess: onDocumentLoadSuccess,\n      children: [/*#__PURE__*/_jsxDEV(Page, {\n        pageNumber: pageNumber,\n        scale: 1.5,\n        onRenderSuccess: onPageRenderSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), highlightRects.map((rect, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          background: \"rgba(255, 255, 0, 0.55)\",\n          left: rect.x,\n          top: rect.y,\n          width: rect.width,\n          height: rect.height,\n          pointerEvents: \"none\"\n        }\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n_s(PdfViewer, \"F21p/v+p0CHqtLN4Ix7c110Mbrk=\");\n_c = PdfViewer;\nvar _c;\n$RefreshReg$(_c, \"PdfViewer\");","map":{"version":3,"names":["React","useEffect","useState","Document","Page","pdfjs","jsxDEV","_jsxDEV","GlobalWorkerOptions","workerSrc","process","env","PUBLIC_URL","TARGET_TEXT","PdfViewer","fileUrl","pageNumber","onDocumentLoadSuccess","_s","highlightRects","setHighlightRects","onPageRenderSuccess","page","getTextContent","then","textContent","viewport","getViewport","scale","boxes","items","forEach","item","str","trim","includes","tx","Util","transform","x","y","height","width","push","style","position","children","file","onLoadSuccess","onRenderSuccess","fileName","_jsxFileName","lineNumber","columnNumber","map","rect","i","background","left","top","pointerEvents","_c","$RefreshReg$"],"sources":["C:/Users/HP/Downloads/maersk-pdf-highlighter/src/PdfViewer.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport \"react-pdf/dist/Page/TextLayer.css\";\n\npdfjs.GlobalWorkerOptions.workerSrc = `${process.env.PUBLIC_URL}/pdf.worker.min.mjs`;\n\nconst TARGET_TEXT = \"Gain on sale of non-current assets, etc.\";\n\nexport default function PdfViewer({ fileUrl, pageNumber, onDocumentLoadSuccess }) {\n  const [highlightRects, setHighlightRects] = useState([]);\n\n  const onPageRenderSuccess = (page) => {\n    page.getTextContent().then((textContent) => {\n      const viewport = page.getViewport({ scale: 1.5 });\n\n      let boxes = [];\n\n      textContent.items.forEach((item) => {\n        const str = item.str.trim();\n\n        if (str.includes(TARGET_TEXT)) {\n          const tx = pdfjs.Util.transform;\n          const transform = tx(viewport.transform, item.transform);\n          const x = transform[4];\n          const y = transform[5] - item.height;\n          const width = item.width * viewport.scale;\n          const height = item.height * viewport.scale;\n\n          boxes.push({ x, y, width, height });\n        }\n      });\n\n      setHighlightRects(boxes);\n    });\n  };\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <Document file={fileUrl} onLoadSuccess={onDocumentLoadSuccess}>\n        <Page\n          pageNumber={pageNumber}\n          scale={1.5}\n          onRenderSuccess={onPageRenderSuccess}\n        />\n\n        {highlightRects.map((rect, i) => (\n          <div\n            key={i}\n            style={{\n              position: \"absolute\",\n              background: \"rgba(255, 255, 0, 0.55)\",\n              left: rect.x,\n              top: rect.y,\n              width: rect.width,\n              height: rect.height,\n              pointerEvents: \"none\",\n            }}\n          />\n        ))}\n      </Document>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}