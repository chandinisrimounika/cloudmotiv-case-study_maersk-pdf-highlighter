{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Downloads\\\\maersk-pdf-highlighter\\\\src\\\\PdfViewer.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\npdfjs.GlobalWorkerOptions.workerSrc = `${process.env.PUBLIC_URL}/pdf.worker.min.mjs`;\n\n// Tokennized search so it works even when PDF splits text\nconst TARGET_TOKENS = [\"gain\", \"on\", \"sale\", \"of\", \"non-current\", \"assets,\", \"etc.\"];\nexport default function PdfViewer({\n  fileUrl,\n  pageNumber,\n  onDocumentLoadSuccess\n}) {\n  _s();\n  const [highlightRect, setHighlightRect] = useState(null);\n  const onPageRenderSuccess = async page => {\n    const content = await page.getTextContent();\n    const viewport = page.getViewport({\n      scale: 1.7\n    });\n    let wordRects = [];\n    let sequence = [];\n    for (let item of content.items) {\n      const word = item.str.trim().toLowerCase();\n      const expected = TARGET_TOKENS[sequence.length];\n      if (word === expected) {\n        const t = pdfjs.Util.transform(viewport.transform, item.transform);\n        const x = t[4];\n        const y = t[5] - item.height * viewport.scale;\n        const width = item.width * viewport.scale;\n        const height = item.height * viewport.scale;\n        sequence.push({\n          x,\n          y,\n          width,\n          height\n        });\n\n        // FULL phrase matched\n        if (sequence.length === TARGET_TOKENS.length) {\n          wordRects = sequence;\n          break;\n        }\n      } else {\n        sequence = [];\n      }\n    }\n\n    // ðŸ”¥ Merge all rectangles into 1 single highlight box (clean yellow line)\n    if (wordRects.length > 0) {\n      const minX = Math.min(...wordRects.map(r => r.x));\n      const maxX = Math.max(...wordRects.map(r => r.x + r.width));\n      const top = Math.min(...wordRects.map(r => r.y));\n      const bottom = Math.max(...wordRects.map(r => r.y + r.height));\n      setHighlightRect({\n        x: minX,\n        y: top,\n        width: maxX - minX,\n        height: bottom - top\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Document, {\n      file: fileUrl,\n      onLoadSuccess: onDocumentLoadSuccess,\n      children: /*#__PURE__*/_jsxDEV(Page, {\n        pageNumber: pageNumber,\n        scale: 1.7,\n        onRenderSuccess: onPageRenderSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), highlightRect && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        left: highlightRect.x,\n        top: highlightRect.y,\n        width: highlightRect.width,\n        height: highlightRect.height,\n        background: \"rgba(255,255,0,0.55)\",\n        borderRadius: \"3px\",\n        pointerEvents: \"none\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(PdfViewer, \"aDM//1qnpMLCP3yqQ9f15MJcCyw=\");\n_c = PdfViewer;\nvar _c;\n$RefreshReg$(_c, \"PdfViewer\");","map":{"version":3,"names":["React","useState","Document","Page","pdfjs","jsxDEV","_jsxDEV","GlobalWorkerOptions","workerSrc","process","env","PUBLIC_URL","TARGET_TOKENS","PdfViewer","fileUrl","pageNumber","onDocumentLoadSuccess","_s","highlightRect","setHighlightRect","onPageRenderSuccess","page","content","getTextContent","viewport","getViewport","scale","wordRects","sequence","item","items","word","str","trim","toLowerCase","expected","length","t","Util","transform","x","y","height","width","push","minX","Math","min","map","r","maxX","max","top","bottom","style","position","children","file","onLoadSuccess","onRenderSuccess","fileName","_jsxFileName","lineNumber","columnNumber","left","background","borderRadius","pointerEvents","_c","$RefreshReg$"],"sources":["C:/Users/HP/Downloads/maersk-pdf-highlighter/src/PdfViewer.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\n\npdfjs.GlobalWorkerOptions.workerSrc = `${process.env.PUBLIC_URL}/pdf.worker.min.mjs`;\n\n// Tokennized search so it works even when PDF splits text\nconst TARGET_TOKENS = [\n  \"gain\", \"on\", \"sale\", \"of\",\n  \"non-current\", \"assets,\", \"etc.\"\n];\n\nexport default function PdfViewer({ fileUrl, pageNumber, onDocumentLoadSuccess }) {\n  const [highlightRect, setHighlightRect] = useState(null);\n\n  const onPageRenderSuccess = async (page) => {\n    const content = await page.getTextContent();\n    const viewport = page.getViewport({ scale: 1.7 });\n\n    let wordRects = [];\n    let sequence = [];\n\n    for (let item of content.items) {\n      const word = item.str.trim().toLowerCase();\n      const expected = TARGET_TOKENS[sequence.length];\n\n      if (word === expected) {\n        const t = pdfjs.Util.transform(viewport.transform, item.transform);\n        const x = t[4];\n        const y = t[5] - (item.height * viewport.scale);\n        const width = item.width * viewport.scale;\n        const height = item.height * viewport.scale;\n\n        sequence.push({ x, y, width, height });\n\n        // FULL phrase matched\n        if (sequence.length === TARGET_TOKENS.length) {\n          wordRects = sequence;\n          break;\n        }\n      } else {\n        sequence = [];\n      }\n    }\n\n    // ðŸ”¥ Merge all rectangles into 1 single highlight box (clean yellow line)\n    if (wordRects.length > 0) {\n      const minX = Math.min(...wordRects.map(r => r.x));\n      const maxX = Math.max(...wordRects.map(r => r.x + r.width));\n\n      const top = Math.min(...wordRects.map(r => r.y));\n      const bottom = Math.max(...wordRects.map(r => r.y + r.height));\n\n      setHighlightRect({\n        x: minX,\n        y: top,\n        width: maxX - minX,\n        height: bottom - top,\n      });\n    }\n  };\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <Document file={fileUrl} onLoadSuccess={onDocumentLoadSuccess}>\n        <Page\n          pageNumber={pageNumber}\n          scale={1.7}\n          onRenderSuccess={onPageRenderSuccess}\n        />\n      </Document>\n\n      {highlightRect && (\n        <div\n          style={{\n            position: \"absolute\",\n            left: highlightRect.x,\n            top: highlightRect.y,\n            width: highlightRect.width,\n            height: highlightRect.height,\n            background: \"rgba(255,255,0,0.55)\",\n            borderRadius: \"3px\",\n            pointerEvents: \"none\"\n          }}\n        />\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}