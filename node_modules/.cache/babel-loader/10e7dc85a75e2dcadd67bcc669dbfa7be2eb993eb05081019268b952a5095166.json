{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Downloads\\\\maersk-pdf-highlighter\\\\src\\\\PdfViewer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\npdfjs.GlobalWorkerOptions.workerSrc = `${process.env.PUBLIC_URL}/pdf.worker.min.mjs`;\nconst TARGET_KEYWORD = \"gainonsaleofnon-currentassets\";\nexport default function PdfViewer({\n  fileUrl,\n  pageNumber,\n  onDocumentLoadSuccess\n}) {\n  _s();\n  const [rects, setRects] = useState([]);\n  const onPageRenderSuccess = async page => {\n    const content = await page.getTextContent();\n    const viewport = page.getViewport({\n      scale: 1.7\n    });\n    let merged = [];\n    let lastY = null;\n    let buffer = \"\";\n\n    // Merge lines into full sentences\n    content.items.forEach(item => {\n      const str = item.str.trim();\n      if (!str) return;\n      const transform = pdfjs.Util.transform(viewport.transform, item.transform);\n      const y = transform[5];\n      if (lastY === null) lastY = y;\n\n      // New line detected\n      if (Math.abs(y - lastY) > 5) {\n        merged.push({\n          text: buffer.toLowerCase(),\n          y: lastY\n        });\n        buffer = str;\n      } else {\n        buffer += \" \" + str;\n      }\n      lastY = y;\n    });\n    merged.push({\n      text: buffer.toLowerCase(),\n      y: lastY\n    });\n\n    // Find the matching line\n    const hit = merged.find(line => line.text.includes(TARGET_KEYWORD));\n    if (!hit) {\n      console.warn(\"TARGET NOT FOUND ON PAGE\");\n      setRects([]);\n      return;\n    }\n\n    // Collect bounding boxes for all chunks on that line\n    let boxes = [];\n    content.items.forEach(item => {\n      const str = item.str.toLowerCase();\n      if (!str) return;\n      const transform = pdfjs.Util.transform(viewport.transform, item.transform);\n      const x = transform[4];\n      const y = transform[5] - item.height * viewport.scale;\n      const width = item.width * viewport.scale;\n      const height = item.height * viewport.scale;\n\n      // Highlight anything on the same Y-line\n      if (Math.abs(transform[5] - hit.y) < 5) {\n        boxes.push({\n          x,\n          y,\n          width,\n          height\n        });\n      }\n    });\n    setRects(boxes);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Document, {\n      file: fileUrl,\n      onLoadSuccess: onDocumentLoadSuccess,\n      children: /*#__PURE__*/_jsxDEV(Page, {\n        pageNumber: pageNumber,\n        scale: 1.7,\n        onRenderSuccess: onPageRenderSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), rects.map((r, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        left: r.x,\n        top: r.y,\n        width: r.width,\n        height: r.height,\n        background: \"rgba(255,255,0,0.4)\",\n        pointerEvents: \"none\",\n        borderRadius: \"2px\"\n      }\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(PdfViewer, \"biI0+eX3efxpaxBWxjqzAKeXhmE=\");\n_c = PdfViewer;\nvar _c;\n$RefreshReg$(_c, \"PdfViewer\");","map":{"version":3,"names":["React","useEffect","useState","Document","Page","pdfjs","jsxDEV","_jsxDEV","GlobalWorkerOptions","workerSrc","process","env","PUBLIC_URL","TARGET_KEYWORD","PdfViewer","fileUrl","pageNumber","onDocumentLoadSuccess","_s","rects","setRects","onPageRenderSuccess","page","content","getTextContent","viewport","getViewport","scale","merged","lastY","buffer","items","forEach","item","str","trim","transform","Util","y","Math","abs","push","text","toLowerCase","hit","find","line","includes","console","warn","boxes","x","height","width","style","position","children","file","onLoadSuccess","onRenderSuccess","fileName","_jsxFileName","lineNumber","columnNumber","map","r","i","left","top","background","pointerEvents","borderRadius","_c","$RefreshReg$"],"sources":["C:/Users/HP/Downloads/maersk-pdf-highlighter/src/PdfViewer.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\n\npdfjs.GlobalWorkerOptions.workerSrc = `${process.env.PUBLIC_URL}/pdf.worker.min.mjs`;\n\nconst TARGET_KEYWORD = \"gainonsaleofnon-currentassets\";\n\nexport default function PdfViewer({ fileUrl, pageNumber, onDocumentLoadSuccess }) {\n  const [rects, setRects] = useState([]);\n\n  const onPageRenderSuccess = async (page) => {\n    const content = await page.getTextContent();\n    const viewport = page.getViewport({ scale: 1.7 });\n\n    let merged = [];\n    let lastY = null;\n    let buffer = \"\";\n\n    // Merge lines into full sentences\n    content.items.forEach((item) => {\n      const str = item.str.trim();\n      if (!str) return;\n\n      const transform = pdfjs.Util.transform(viewport.transform, item.transform);\n      const y = transform[5];\n\n      if (lastY === null) lastY = y;\n\n      // New line detected\n      if (Math.abs(y - lastY) > 5) {\n        merged.push({ text: buffer.toLowerCase(), y: lastY });\n        buffer = str;\n      } else {\n        buffer += \" \" + str;\n      }\n\n      lastY = y;\n    });\n\n    merged.push({ text: buffer.toLowerCase(), y: lastY });\n\n    // Find the matching line\n    const hit = merged.find((line) =>\n      line.text.includes(TARGET_KEYWORD)\n    );\n\n    if (!hit) {\n      console.warn(\"TARGET NOT FOUND ON PAGE\");\n      setRects([]);\n      return;\n    }\n\n    // Collect bounding boxes for all chunks on that line\n    let boxes = [];\n\n    content.items.forEach((item) => {\n      const str = item.str.toLowerCase();\n      if (!str) return;\n\n      const transform = pdfjs.Util.transform(viewport.transform, item.transform);\n      const x = transform[4];\n      const y = transform[5] - item.height * viewport.scale;\n      const width = item.width * viewport.scale;\n      const height = item.height * viewport.scale;\n\n      // Highlight anything on the same Y-line\n      if (Math.abs((transform[5] - hit.y)) < 5) {\n        boxes.push({ x, y, width, height });\n      }\n    });\n\n    setRects(boxes);\n  };\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <Document file={fileUrl} onLoadSuccess={onDocumentLoadSuccess}>\n        <Page\n          pageNumber={pageNumber}\n          scale={1.7}\n          onRenderSuccess={onPageRenderSuccess}\n        />\n      </Document>\n\n      {rects.map((r, i) => (\n        <div\n          key={i}\n          style={{\n            position: \"absolute\",\n            left: r.x,\n            top: r.y,\n            width: r.width,\n            height: r.height,\n            background: \"rgba(255,255,0,0.4)\",\n            pointerEvents: \"none\",\n            borderRadius: \"2px\"\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}