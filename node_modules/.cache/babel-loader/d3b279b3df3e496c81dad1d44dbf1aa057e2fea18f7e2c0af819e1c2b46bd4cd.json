{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Downloads\\\\maersk-pdf-highlighter\\\\src\\\\PdfViewer.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\n\n// Load local worker\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\npdfjs.GlobalWorkerOptions.workerSrc = `${process.env.PUBLIC_URL}/pdf.worker.min.mjs`;\n\n// The sentence broken into PDF word tokens\nconst TARGET_TOKENS = [\"gain\", \"on\", \"sale\", \"of\", \"non-current\", \"assets,\", \"etc.\"];\nexport default function PdfViewer({\n  fileUrl,\n  pageNumber,\n  onDocumentLoadSuccess\n}) {\n  _s();\n  const [highlightRect, setHighlightRect] = useState(null);\n  const onPageRenderSuccess = async page => {\n    const textContent = await page.getTextContent();\n    const viewport = page.getViewport({\n      scale: 1.7\n    });\n    let matched = [];\n    let finalRects = [];\n    for (let item of textContent.items) {\n      const word = item.str.trim().toLowerCase();\n      const expected = TARGET_TOKENS[matched.length];\n      if (word === expected) {\n        // Calculate bounding box\n        const t = pdfjs.Util.transform(viewport.transform, item.transform);\n        const x = t[4];\n        const y = t[5] - item.height * viewport.scale;\n        const width = item.width * viewport.scale;\n        const height = item.height * viewport.scale;\n        matched.push({\n          x,\n          y,\n          width,\n          height\n        });\n\n        // If full sentence matched → store highlight boxes\n        if (matched.length === TARGET_TOKENS.length) {\n          finalRects = matched;\n          break;\n        }\n      } else {\n        matched = [];\n      }\n    }\n\n    // Merge boxes into a single large highlight rectangle\n    if (finalRects.length > 0) {\n      const minX = Math.min(...finalRects.map(r => r.x));\n      const maxX = Math.max(...finalRects.map(r => r.x + r.width));\n      const minY = Math.min(...finalRects.map(r => r.y));\n      const maxY = Math.max(...finalRects.map(r => r.y + r.height));\n      setHighlightRect({\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Document, {\n      file: fileUrl,\n      onLoadSuccess: onDocumentLoadSuccess,\n      children: /*#__PURE__*/_jsxDEV(Page, {\n        pageNumber: pageNumber,\n        scale: 1.7,\n        onRenderSuccess: onPageRenderSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), highlightRect && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        left: highlightRect.x,\n        top: highlightRect.y,\n        width: highlightRect.width,\n        height: highlightRect.height,\n        background: \"rgba(255,255,0,0.55)\",\n        borderRadius: \"3px\",\n        pointerEvents: \"none\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(PdfViewer, \"aDM//1qnpMLCP3yqQ9f15MJcCyw=\");\n_c = PdfViewer;\nvar _c;\n$RefreshReg$(_c, \"PdfViewer\");","map":{"version":3,"names":["React","useState","Document","Page","pdfjs","jsxDEV","_jsxDEV","GlobalWorkerOptions","workerSrc","process","env","PUBLIC_URL","TARGET_TOKENS","PdfViewer","fileUrl","pageNumber","onDocumentLoadSuccess","_s","highlightRect","setHighlightRect","onPageRenderSuccess","page","textContent","getTextContent","viewport","getViewport","scale","matched","finalRects","item","items","word","str","trim","toLowerCase","expected","length","t","Util","transform","x","y","height","width","push","minX","Math","min","map","r","maxX","max","minY","maxY","style","position","children","file","onLoadSuccess","onRenderSuccess","fileName","_jsxFileName","lineNumber","columnNumber","left","top","background","borderRadius","pointerEvents","_c","$RefreshReg$"],"sources":["C:/Users/HP/Downloads/maersk-pdf-highlighter/src/PdfViewer.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\n\n// Load local worker\npdfjs.GlobalWorkerOptions.workerSrc = `${process.env.PUBLIC_URL}/pdf.worker.min.mjs`;\n\n// The sentence broken into PDF word tokens\nconst TARGET_TOKENS = [\n  \"gain\", \"on\", \"sale\", \"of\",\n  \"non-current\", \"assets,\", \"etc.\"\n];\n\nexport default function PdfViewer({ fileUrl, pageNumber, onDocumentLoadSuccess }) {\n  const [highlightRect, setHighlightRect] = useState(null);\n\n  const onPageRenderSuccess = async (page) => {\n    const textContent = await page.getTextContent();\n    const viewport = page.getViewport({ scale: 1.7 });\n\n    let matched = [];\n    let finalRects = [];\n\n    for (let item of textContent.items) {\n      const word = item.str.trim().toLowerCase();\n      const expected = TARGET_TOKENS[matched.length];\n\n      if (word === expected) {\n        // Calculate bounding box\n        const t = pdfjs.Util.transform(viewport.transform, item.transform);\n\n        const x = t[4];\n        const y = t[5] - (item.height * viewport.scale);\n        const width = item.width * viewport.scale;\n        const height = item.height * viewport.scale;\n\n        matched.push({ x, y, width, height });\n\n        // If full sentence matched → store highlight boxes\n        if (matched.length === TARGET_TOKENS.length) {\n          finalRects = matched;\n          break;\n        }\n      } else {\n        matched = [];\n      }\n    }\n\n    // Merge boxes into a single large highlight rectangle\n    if (finalRects.length > 0) {\n      const minX = Math.min(...finalRects.map(r => r.x));\n      const maxX = Math.max(...finalRects.map(r => r.x + r.width));\n\n      const minY = Math.min(...finalRects.map(r => r.y));\n      const maxY = Math.max(...finalRects.map(r => r.y + r.height));\n\n      setHighlightRect({\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY,\n      });\n    }\n  };\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <Document file={fileUrl} onLoadSuccess={onDocumentLoadSuccess}>\n        <Page\n          pageNumber={pageNumber}\n          scale={1.7}\n          onRenderSuccess={onPageRenderSuccess}\n        />\n      </Document>\n\n      {highlightRect && (\n        <div\n          style={{\n            position: \"absolute\",\n            left: highlightRect.x,\n            top: highlightRect.y,\n            width: highlightRect.width,\n            height: highlightRect.height,\n            background: \"rgba(255,255,0,0.55)\",\n            borderRadius: \"3px\",\n            pointerEvents: \"none\",\n          }}\n        />\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}