{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Downloads\\\\maersk-pdf-highlighter\\\\src\\\\PdfViewer.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\npdfjs.GlobalWorkerOptions.workerSrc = `${process.env.PUBLIC_URL}/pdf.worker.min.mjs`;\n\n// Split the target into tokens for flexible matching\nconst TARGET_TOKENS = [\"gain\", \"on\", \"sale\", \"of\", \"non-current\", \"assets,\", \"etc.\"];\nexport default function PdfViewer({\n  fileUrl,\n  pageNumber,\n  onDocumentLoadSuccess\n}) {\n  _s();\n  const [highlightRects, setHighlightRects] = useState([]);\n  const onPageRenderSuccess = async page => {\n    const textContent = await page.getTextContent();\n    const viewport = page.getViewport({\n      scale: 1.7\n    });\n    let boxes = [];\n    let matchedSequence = [];\n    textContent.items.forEach(item => {\n      const word = item.str.trim().toLowerCase();\n      const expectedWord = TARGET_TOKENS[matchedSequence.length];\n      if (word === expectedWord) {\n        // Compute bounding box\n        const t = pdfjs.Util.transform(viewport.transform, item.transform);\n        const x = t[4];\n        const y = t[5] - item.height * viewport.scale;\n        const width = item.width * viewport.scale;\n        const height = item.height * viewport.scale;\n        matchedSequence.push({\n          x,\n          y,\n          width,\n          height\n        });\n\n        // If full phrase matched → save boxes\n        if (matchedSequence.length === TARGET_TOKENS.length) {\n          boxes = matchedSequence;\n        }\n      } else {\n        matchedSequence = [];\n      }\n    });\n    setHighlightRects(boxes);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Document, {\n      file: fileUrl,\n      onLoadSuccess: onDocumentLoadSuccess,\n      children: /*#__PURE__*/_jsxDEV(Page, {\n        pageNumber: pageNumber,\n        scale: 1.7,\n        onRenderSuccess: onPageRenderSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), highlightRects.map((r, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        left: r.x,\n        top: r.y,\n        width: r.width,\n        height: r.height,\n        background: \"rgba(255,255,0,0.55)\",\n        pointerEvents: \"none\",\n        borderRadius: \"3px\"\n      }\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(PdfViewer, \"F21p/v+p0CHqtLN4Ix7c110Mbrk=\");\n_c = PdfViewer;\nvar _c;\n$RefreshReg$(_c, \"PdfViewer\");","map":{"version":3,"names":["React","useState","Document","Page","pdfjs","jsxDEV","_jsxDEV","GlobalWorkerOptions","workerSrc","process","env","PUBLIC_URL","TARGET_TOKENS","PdfViewer","fileUrl","pageNumber","onDocumentLoadSuccess","_s","highlightRects","setHighlightRects","onPageRenderSuccess","page","textContent","getTextContent","viewport","getViewport","scale","boxes","matchedSequence","items","forEach","item","word","str","trim","toLowerCase","expectedWord","length","t","Util","transform","x","y","height","width","push","style","position","children","file","onLoadSuccess","onRenderSuccess","fileName","_jsxFileName","lineNumber","columnNumber","map","r","i","left","top","background","pointerEvents","borderRadius","_c","$RefreshReg$"],"sources":["C:/Users/HP/Downloads/maersk-pdf-highlighter/src/PdfViewer.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\n\npdfjs.GlobalWorkerOptions.workerSrc = `${process.env.PUBLIC_URL}/pdf.worker.min.mjs`;\n\n// Split the target into tokens for flexible matching\nconst TARGET_TOKENS = [\n  \"gain\", \"on\", \"sale\", \"of\",\n  \"non-current\", \"assets,\", \"etc.\"\n];\n\nexport default function PdfViewer({ fileUrl, pageNumber, onDocumentLoadSuccess }) {\n  const [highlightRects, setHighlightRects] = useState([]);\n\n  const onPageRenderSuccess = async (page) => {\n    const textContent = await page.getTextContent();\n    const viewport = page.getViewport({ scale: 1.7 });\n\n    let boxes = [];\n    let matchedSequence = [];\n\n    textContent.items.forEach((item) => {\n      const word = item.str.trim().toLowerCase();\n      const expectedWord = TARGET_TOKENS[matchedSequence.length];\n\n      if (word === expectedWord) {\n        // Compute bounding box\n        const t = pdfjs.Util.transform(viewport.transform, item.transform);\n        const x = t[4];\n        const y = t[5] - (item.height * viewport.scale);\n        const width = item.width * viewport.scale;\n        const height = item.height * viewport.scale;\n\n        matchedSequence.push({ x, y, width, height });\n\n        // If full phrase matched → save boxes\n        if (matchedSequence.length === TARGET_TOKENS.length) {\n          boxes = matchedSequence;\n        }\n      } else {\n        matchedSequence = [];\n      }\n    });\n\n    setHighlightRects(boxes);\n  };\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <Document file={fileUrl} onLoadSuccess={onDocumentLoadSuccess}>\n        <Page\n          pageNumber={pageNumber}\n          scale={1.7}\n          onRenderSuccess={onPageRenderSuccess}\n        />\n      </Document>\n\n      {highlightRects.map((r, i) => (\n        <div\n          key={i}\n          style={{\n            position: \"absolute\",\n            left: r.x,\n            top: r.y,\n            width: r.width,\n            height: r.height,\n            background: \"rgba(255,255,0,0.55)\",\n            pointerEvents: \"none\",\n            borderRadius: \"3px\"\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,QAAQ,EAAEC,IAAI,EAAEC,KAAK,QAAQ,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElDF,KAAK,CAACG,mBAAmB,CAACC,SAAS,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,UAAU,qBAAqB;;AAEpF;AACA,MAAMC,aAAa,GAAG,CACpB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAC1B,aAAa,EAAE,SAAS,EAAE,MAAM,CACjC;AAED,eAAe,SAASC,SAASA,CAAC;EAAEC,OAAO;EAAEC,UAAU;EAAEC;AAAsB,CAAC,EAAE;EAAAC,EAAA;EAChF,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAExD,MAAMmB,mBAAmB,GAAG,MAAOC,IAAI,IAAK;IAC1C,MAAMC,WAAW,GAAG,MAAMD,IAAI,CAACE,cAAc,CAAC,CAAC;IAC/C,MAAMC,QAAQ,GAAGH,IAAI,CAACI,WAAW,CAAC;MAAEC,KAAK,EAAE;IAAI,CAAC,CAAC;IAEjD,IAAIC,KAAK,GAAG,EAAE;IACd,IAAIC,eAAe,GAAG,EAAE;IAExBN,WAAW,CAACO,KAAK,CAACC,OAAO,CAAEC,IAAI,IAAK;MAClC,MAAMC,IAAI,GAAGD,IAAI,CAACE,GAAG,CAACC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MAC1C,MAAMC,YAAY,GAAGxB,aAAa,CAACgB,eAAe,CAACS,MAAM,CAAC;MAE1D,IAAIL,IAAI,KAAKI,YAAY,EAAE;QACzB;QACA,MAAME,CAAC,GAAGlC,KAAK,CAACmC,IAAI,CAACC,SAAS,CAAChB,QAAQ,CAACgB,SAAS,EAAET,IAAI,CAACS,SAAS,CAAC;QAClE,MAAMC,CAAC,GAAGH,CAAC,CAAC,CAAC,CAAC;QACd,MAAMI,CAAC,GAAGJ,CAAC,CAAC,CAAC,CAAC,GAAIP,IAAI,CAACY,MAAM,GAAGnB,QAAQ,CAACE,KAAM;QAC/C,MAAMkB,KAAK,GAAGb,IAAI,CAACa,KAAK,GAAGpB,QAAQ,CAACE,KAAK;QACzC,MAAMiB,MAAM,GAAGZ,IAAI,CAACY,MAAM,GAAGnB,QAAQ,CAACE,KAAK;QAE3CE,eAAe,CAACiB,IAAI,CAAC;UAAEJ,CAAC;UAAEC,CAAC;UAAEE,KAAK;UAAED;QAAO,CAAC,CAAC;;QAE7C;QACA,IAAIf,eAAe,CAACS,MAAM,KAAKzB,aAAa,CAACyB,MAAM,EAAE;UACnDV,KAAK,GAAGC,eAAe;QACzB;MACF,CAAC,MAAM;QACLA,eAAe,GAAG,EAAE;MACtB;IACF,CAAC,CAAC;IAEFT,iBAAiB,CAACQ,KAAK,CAAC;EAC1B,CAAC;EAED,oBACErB,OAAA;IAAKwC,KAAK,EAAE;MAAEC,QAAQ,EAAE;IAAW,CAAE;IAAAC,QAAA,gBACnC1C,OAAA,CAACJ,QAAQ;MAAC+C,IAAI,EAAEnC,OAAQ;MAACoC,aAAa,EAAElC,qBAAsB;MAAAgC,QAAA,eAC5D1C,OAAA,CAACH,IAAI;QACHY,UAAU,EAAEA,UAAW;QACvBW,KAAK,EAAE,GAAI;QACXyB,eAAe,EAAE/B;MAAoB;QAAAgC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACM,CAAC,EAEVrC,cAAc,CAACsC,GAAG,CAAC,CAACC,CAAC,EAAEC,CAAC,kBACvBpD,OAAA;MAEEwC,KAAK,EAAE;QACLC,QAAQ,EAAE,UAAU;QACpBY,IAAI,EAAEF,CAAC,CAAChB,CAAC;QACTmB,GAAG,EAAEH,CAAC,CAACf,CAAC;QACRE,KAAK,EAAEa,CAAC,CAACb,KAAK;QACdD,MAAM,EAAEc,CAAC,CAACd,MAAM;QAChBkB,UAAU,EAAE,sBAAsB;QAClCC,aAAa,EAAE,MAAM;QACrBC,YAAY,EAAE;MAChB;IAAE,GAVGL,CAAC;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAWP,CACF,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAACtC,EAAA,CA/DuBJ,SAAS;AAAAmD,EAAA,GAATnD,SAAS;AAAA,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}